<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#7760fe" />
    <meta
      name="description"
      content="Professional URL shortening service with analytics" />
    <meta
      name="keywords"
      content="URL Shortener, Link Shortening, URL Analytics, PopCat URL Shortener" />

    <title>URL Shortener - {{data.short}} | {{data.clicks}} Clicks</title>

    <link
      rel="icon"
      href="{{ url_for('static', filename='img/popcat.png') }}" />

    <link
      rel="preload"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      as="style" />
    <link
      rel="preload"
      href="{{ url_for('static', filename='font/PowerGrotesk.ttf') }}"
      as="font"
      type="font/ttf"
      crossorigin="" />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap"
      as="style" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/info.css') }}" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap"
      rel="stylesheet" />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#7760fe',
              secondary: '#9c8cf4',
              accent: '#9180fa'
            },
            animation: {
              'fade-in': 'fadeIn 0.6s ease-out',
              'slide-up': 'slideUp 0.8s ease-out',
              'pulse-glow': 'pulseGlow 2s infinite',
              float: 'float 3s ease-in-out infinite'
            },
            fontFamily: {
              power: ['PowerGrotesk', 'Arial', 'sans-serif'],
              poppins: ['Poppins', 'sans-serif']
            }
          }
        }
      };
    </script>
  </head>

  <body class="min-h-screen overflow-x-hidden">
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
      <div
        class="absolute -top-40 -right-40 w-80 h-80 rounded-full bg-primary opacity-10 animate-float"></div>
      <div
        class="absolute -bottom-40 -left-40 w-96 h-96 rounded-full bg-secondary opacity-10 animate-float"
        style="animation-delay: -1.5s"></div>
    </div>

    <div id="copyNotification" class="copy-notification">
      <i class="fas fa-check-circle mr-2"></i>
      Link copied to clipboard!
    </div>

    <main class="relative z-10">
      <div
        class="min-h-screen flex justify-center items-center flex-col lg:flex-row max-w-7xl mx-auto px-4 gap-12">
        <div class="text-center lg:text-left animate-fade-in">
          <div class="mb-6">
            <h1
              class="text-6xl lg:text-7xl font-power font-bold text-white mb-4 leading-tight">
              URL
              <span
                class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"
                >Shortener</span
              >
            </h1>
          </div>
        </div>

        <div class="glass-card p-8 max-w-lg w-full animate-slide-up">
          <div class="flex justify-between items-center mb-6">
            <div class="flex items-center space-x-3">
              <div class="w-3 h-3 bg-red-500 rounded-full"></div>
              <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
              <div class="w-3 h-3 bg-green-500 rounded-full"></div>
            </div>
            <button
              class="text-gray-400 hover:text-white transition-colors duration-300 tooltip"
              data-tooltip="Close"
              onclick="window.history.back()">
              <i class="fas fa-times text-lg"></i>
            </button>
          </div>

          <div class="text-center mb-8">
            <div
              class="inline-flex items-center bg-gray-800 rounded-lg px-4 py-3 mb-4">
              <i class="fas fa-link text-primary mr-3"></i>
              <code
                class="text-2xl font-mono text-white font-bold"
                id="shortUrl"
                >/{{data.short}}</code
              >
              <button
                class="ml-3 text-gray-400 hover:text-primary transition-colors duration-300 tooltip"
                data-tooltip="Copy to clipboard"
                onclick="copyToClipboard()">
                <i class="fas fa-copy"></i>
              </button>
            </div>

            <div class="text-sm text-gray-400 mb-6 font-poppins">
              <span class="font-medium">Redirects to:</span>
              <div class="bg-gray-800 rounded-lg px-3 py-2 mt-2 break-all">
                <span class="text-accent">{{data.full}}</span>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4 mb-8">
            <div class="stats-item bg-gray-800 rounded-lg p-4 text-center">
              <div class="text-3xl font-bold text-primary mb-2 font-power">
                {{data.clicks}}
              </div>
              <div
                class="text-sm text-gray-400 uppercase tracking-wide font-poppins">
                <i class="fas fa-eye mr-1"></i> Total Views
              </div>
            </div>
            <div class="stats-item bg-gray-800 rounded-lg p-4 text-center">
              <div class="text-3xl font-bold text-secondary mb-2 font-power">
                {{data.days_active }}
              </div>
              <div
                class="text-sm text-gray-400 uppercase tracking-wide font-poppins">
                <i class="fas fa-calendar mr-1"></i> Days Active
              </div>
            </div>
          </div>

          <div class="space-y-4">
            <a
              href="https://url.popcat.xyz/abcgsdsdsdarf"
              class="btn-primary w-full py-4 px-6 rounded-lg text-white font-semibold text-lg flex items-center justify-center space-x-2 relative overflow-hidden font-poppins">
              <i class="fas fa-external-link-alt"></i>
              <span>Visit Link</span>
              <i class="fas fa-arrow-right ml-2"></i>
            </a>

            <div class="grid grid-cols-2 gap-3">
              <button
                onclick="shareLink()"
                class="bg-gray-700 hover:bg-gray-600 text-white py-3 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center space-x-2 font-poppins">
                <i class="fas fa-share-alt"></i>
                <span>Share</span>
              </button>
              <button
                onclick="generateQR()"
                class="bg-gray-700 hover:bg-gray-600 text-white py-3 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center space-x-2 font-poppins">
                <i class="fas fa-qrcode"></i>
                <span>QR Code</span>
              </button>
            </div>
          </div>

          <div class="mt-6 pt-6 border-t border-gray-600">
            <div class="text-center text-sm text-gray-400 font-poppins">
              <p></p>
              Created:
              <span class="text-gray-300">
                {{ data.date.strftime(data.date_format) }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div
      id="qrModal"
      class="fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50 hidden">
      <div class="glass-card p-8 max-w-sm w-full mx-4">
        <div class="text-center">
          <h3 class="text-xl font-bold text-white mb-4 font-power">QR Code</h3>
          <div
            id="qrcode"
            class="flex justify-center mb-4 bg-white p-4 rounded-lg">
            <canvas height="200" width="200"></canvas>
          </div>
          <button
            onclick="closeQRModal()"
            class="bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg transition-colors duration-300 font-poppins">
            Close
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script>
      async function copyToClipboard() {
        const shortUrl = window.location.origin + '/abcgsdsdsdarf';
        try {
          await navigator.clipboard.writeText(shortUrl);
          showNotification();
        } catch (err) {
          const textArea = document.createElement('textarea');
          textArea.value = shortUrl;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
          showNotification();
        }
      }

      function showNotification() {
        const notification = document.getElementById('copyNotification');
        notification.classList.add('show');
        setTimeout(() => {
          notification.classList.remove('show');
        }, 3000);
      }

      async function shareLink() {
        const shortUrl = window.location.origin + '/abcgsdsdsdarf';
        if (navigator.share) {
          try {
            await navigator.share({
              title: 'Check out this link',
              url: shortUrl
            });
          } catch (err) {
            copyToClipboard();
          }
        } else {
          copyToClipboard();
        }
      }

      function generateQR() {
        const shortUrl = window.location.origin + '/abcgsdsdsdarf';
        const qrContainer = document.getElementById('qrcode');
        qrContainer.innerHTML = '';

        const qr = new QRious({
          element: document.createElement('canvas'),
          value: shortUrl,
          size: 200,
          foreground: '#7760fe',
          background: '#ffffff'
        });

        qrContainer.appendChild(qr.canvas);
        document.getElementById('qrModal').classList.remove('hidden');
        document.getElementById('qrModal').classList.add('flex');
      }

      function closeQRModal() {
        document.getElementById('qrModal').classList.add('hidden');
        document.getElementById('qrModal').classList.remove('flex');
      }

      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
          closeQRModal();
        }
      });

      function createParticle() {
        const particle = document.createElement('div');
        particle.className =
          'fixed w-1 h-1 bg-primary rounded-full pointer-events-none z-0';
        particle.style.left = Math.random() * window.innerWidth + 'px';
        particle.style.top = window.innerHeight + 'px';
        particle.style.opacity = '0.6';

        document.body.appendChild(particle);

        const animation = particle.animate(
          [
            { transform: 'translateY(0) rotate(0deg)', opacity: 0.6 },
            {
              transform: `translateY(-${
                window.innerHeight + 100
              }px) rotate(360deg)`,
              opacity: 0
            }
          ],
          {
            duration: 8000 + Math.random() * 4000,
            easing: 'linear'
          }
        );

        animation.onfinish = () => particle.remove();
      }

      setInterval(createParticle, 3000);
    </script>

    <div
      class="fixed w-1 h-1 bg-primary rounded-full pointer-events-none z-0"
      style="left: 397.105px; top: 955px; opacity: 0.6"></div>
    <div
      class="fixed w-1 h-1 bg-primary rounded-full pointer-events-none z-0"
      style="left: 1238.58px; top: 955px; opacity: 0.6"></div>
    <div
      class="fixed w-1 h-1 bg-primary rounded-full pointer-events-none z-0"
      style="left: 487.025px; top: 955px; opacity: 0.6"></div>
    <div
      class="fixed w-1 h-1 bg-primary rounded-full pointer-events-none z-0"
      style="left: 489.849px; top: 955px; opacity: 0.6"></div>
    <div
      class="fixed w-1 h-1 bg-primary rounded-full pointer-events-none z-0"
      style="left: 433.138px; top: 955px; opacity: 0.6"></div>
  </body>
</html>
